~~只会注入~~

sql注入是web的早期漏洞，常存在于各种早期的查询，到了现代，sql注入已经演化为了各种不同的数据库注入形式。

# 一、数据库介绍：
数据库是存放数据的仓库，是存放数据的仓库，
大多数的数据库为关系型数据库：
结构为：库->表->列->行
而sql语言就是一种用于数据库的语言，用于告诉数据库我需要什么，有什么需要查询。
而作为一门语言，sql注入就是一种很特别的文字游戏，而sql语句最搞笑的是：他放入其中的填充竟然具有代码效力，例如注释真的可以执行，引号括号之类的真的可能造成不闭合的报错;

一些常用的sql语句：
```sql
# 一些SQL注入常用的函数
version()                 # 查看数据库版本
database()                # 查看当前数据库名
user()                    # 查看当前数据库用户
system_user()             # 查看系统用户名
group_concat()            # 把数据库中的某列数据或某几列数据合并为一个字符串
@@datadir                 # 查看数据库路径
@@version_compile_os      # 查看操作系统
```

在 MySQL5.0 版本后，MySQL 默认在数据库中存放一个information_schema的数据库，该数据库中包含了当前系统中所有的数据库、表、列、索引、视图等相关的元数据信息，是MySql自身信息元数据的存储库，我们需要记住三个表名，分别是 schemata，tables，columns。

根据这一个特点，我们可以做一些操作，来盗取一些有意思的内容，比如，我们可以通过,联合查询等方式来直接查出其中的敏感数据。

# 二、注入方式介绍
## 1、联合注入查询
传统派，最最经典的sql注入方式，利用union语句，同时加上注释，将数据库中的敏感信息脱出来。
这里介绍联合注入的手法：
首先，进行测试，检测语句的包裹形态，检查在什么状态下，语句将出现报错，以此查看其中的包裹，可以利用万能密码字典fuzz一下，可以比较详细的知晓其中的过滤点，一些检测后出现的绕过将在后文中提及。
这里注意，注释的形式与提交信息的方式有关系，如果是一GET方式提交，注释将是 --+ ， 而如果以POST方式提交信息，则会以#为注释。
好，我们继续，

我们输入后看看回显在哪里，此时，查询的结果**通常**会显示在你的电脑上，没有的情况，先不要慌，因为还有很多种可能性。

即使完全没有回显，通过一些方式来判断一些内容的，而且，有一些查询是一定有结果的：

这其中的代表是列数判断的函数 order by ：

order by 1啊2啊3啊4啊…………

即使没有回显，这里在超出列数时是会出现报错的，**如果报错**那就需要考虑其他不同的注入手法了。
那么，假设此时我们已经拿到了列数的数量，在良好的情况下，我们会看见回显。
此时，你会知道回显的位置，在这个前提之下，我们开始一套常规注入的组合拳：
爆库，爆表，爆字段，爆数据
```SQL
SELECT database();
SELECT schema_name FROM information_schema.schemata;
```
可以查询到表的名称，此时，进一步查询
```SQL
--MySQL 4版本时用version=9，MySQL 5版本时用version=10
UNION SELECT GROUP_CONCAT(table_name) FROM information_schema.tables WHERE version=10;   /* 列出当前数据库中的表 */
UNION SELECT TABLE_NAME FROM information_schema.tables WHERE TABLE_SCHEMA=database();   /* 列出所有用户自定义数据库中的表 */
SELECT table_schema, table_name FROM information_schema.tables WHERE table_schema!='information_schema' AND table_schema!='mysql';
```
注意，在注入的过程之中，使用GROUP_CONCAT()函数是一个好习惯，因为有很多的查询只会输出一个结果，而不是多个结果，这个函数将大量的结果拼接进入了一个结果之中，以便能够正常的进行输出。如果此函数被过滤，首先考虑绕过，如若无法绕过，那么就使用limit函数将结果限制在一行，然后一行一行的看。
最后，使用相同的方式进行爆内容就可以了。

ok，最基础的联合注入就结束了。

## 2、堆叠注入：
堆叠注入的危害性相较于联合注入更大，如果说联合注入是纯看的话，堆叠注入给予了攻击者直接操作数据库的权利。
在这里先介绍sql相关的全局变量，sql的全局变量是一种特殊的变量。他决定了数据库中的部分有什么样的权限
比如secure_file_priv对读写文件有影响，若目录在这个变量之中，说明数据库对这个路径的文件有操作的权限。还有很多，这里不一一介绍了。
接下来介绍堆叠注入。
有如下的例子：
```SQL
 select phone,e_mail from guests;select username,password from users;
```
可以发现，在样例中，在一行里嵌套了两条语句，也就是说，在实战之中，我们将


